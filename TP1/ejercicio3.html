<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Image Data</title>
  </head>
  <body>
    <canvas id="canvas" width="900" height="600" style="border:#000 solid 1px;" />
  </body>


  <script type="text/javascript">
   var ctx = document.getElementById("canvas").getContext("2d");
    var width = 900;
    var height =600;
    r=0;
    g=0;
    b=0;
    a = 255;
    var imageData = ctx.createImageData(width, height);
    for (x=0; x<width; x++){
      for (y=0; y<height; y++){
        r=((y*a)/height);
        g=((y*a)/height);
        b=((y*a)/height);
        setPixel(imageData, x, y, r, g, b, a);
      }
    }
    ctx.putImageData(imageData,0,0);
    function setPixel(imageData, x, y, r, g, b, a){
      index = (x + y * imageData.width) *4;
      imageData.data[index+0] = r;
      imageData.data[index+1] = g;
      imageData.data[index+2] = b;
      imageData.data[index+3] = a;
    }
  </script>
</html>
